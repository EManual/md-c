代码如下：
[code=java]
#include <stdio.h>
#define ZIPLEN 10
#define PHONLEN 15
#[Tags]/*struct addr类型定义*/
struct addr
{
	#[Keywords]char #*name;#[Tags]/*姓名*/
	#[Keywords]char #*address;#[Tags]/*地址*/
	#[Keywords]char #zip[ZIPLEN];#[Tags]/*邮政编码*/
	#[Keywords]char #phone[PHONLEN];#[Tags]/*电话号码*/
#};
main()#[Tags]/*本主函数示意上述输入输出函数的用法*/
{
	#struct addr p[100];
	#[Keywords]int #i,j;
	#clrscr();
	#[Keywords]for#(i=0;readaddr(p+i);i++);
	#[Keywords]for#(j=0;j<i;j++) writeaddr(p+j);
	#puts(#[Fields]"\n Press any key to quit..."#);
	#getch();
#}
#[Tags]/* 函数readaddr用于输入一个通信录函数 */
#[Keywords]int #readaddr(struct addr *dpt)
{
	#[Keywords]int #len;
	#[Keywords]char #buf[120];#[Tags]/*输入字符串的缓冲区*/
	#printf(#[Fields]"\nPlease input the Name:\n"#);#[Tags]/*输入姓名*/
	#[Keywords]if#(scanf(#[Fields]"%s"#,buf)==1)
	#{
		#len=strlen(buf);
		#dpt->name=(#[Keywords]char #*)malloc(len+1);#[Tags]/*申请存贮姓名的空间*/
		#strcpy(dpt->name,buf);
	#}
	#[Keywords]else #[Keywords]return #0;#[Tags]/*Ctrl+Z结束输入*/
	#printf(#[Fields]"Please input the Address:\n"#);#[Tags]/*输入地址*/
	#[Keywords]if#(scanf(#[Fields]"%s"#,buf)==1)
	#{
		#len=strlen(buf);
		#dpt->address=(#[Keywords]char #*)malloc(len+1);#[Tags]/*申请存贮地址的空间*/
		#strcpy(dpt->address,buf);
	#}
	#else
	#{#[Tags]/*Ctrl+Z结束输入*/
		#free(dpt->name);#[Tags]/*释放存贮姓名的空间*/
		#[Keywords]return #0;
	#}
	#printf(#[Fields]"Please input the Zip code:\n"#);#[Tags]/*输入邮编*/
	#[Keywords]if#(scanf(#[Fields]"%s"#,buf)==1)
		#strncpy(dpt->zip,buf,ZIPLEN-1);
	#else
	#{
		#free(dpt->name);#[Tags]/*释放存贮姓名的空间*/
		#free(dpt->address);#[Tags]/*释放存贮地址的空间*/
		#[Keywords]return #0;#[Tags]/*Ctrl+Z结束输入*/
	#}
	#printf(#[Fields]"Please input the Phone number:\n"#);#[Tags]/*输入电话号码*/
	#[Keywords]if#(scanf(#[Fields]"%s"#,buf)==1)
		#strncpy(dpt->phone,buf,PHONLEN-1);
	#else
	#{
		#free(dpt->name);
		#free(dpt->address);
		#[Keywords]return #0;#[Tags]/*Ctrl+Z结束输入*/
	#}
	#[Keywords]return #1;
#}
#[Tags]/* 函数writeaddr用于输出通讯录 */
#[Keywords]int #writeaddr(struct addr*dpt)
{
	#printf(#[Fields]"Name	:   %s\n"#,	dpt->name);#[Tags]/*输出姓名*/
	#printf(#[Fields]"Address	:   %s\n"#,	dpt->address);#[Tags]/*输出地址*/
	#printf(#[Fields]"Zip	:   %s\n"#,	dpt->zip);#[Tags]/*输出邮编*/
	#printf(#[Fields]"Phone	:   %s\n\n"#,	dpt->phone);#[Tags]/*输出电话号码*/
#}
[/code]