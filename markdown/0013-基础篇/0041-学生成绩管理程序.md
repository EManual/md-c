代码如下：
[code=java]
#[Tags]/*
#[Tags]学生成绩管理程序
#[Tags]编制一个统计学生考试分数的管理程序。
#[Tags]设学生成绩已以一个学生一个记录的形式存储在文件中，
#[Tags]每位学生记录包含的信息有：姓名，学号和各门功课的成绩。
#[Tags]程序具有以下几项功能：求出各门课程的总分，平均分，按姓名，
#[Tags]按学号寻找其记录并显示，浏览全部学生成绩和按总分由高到低显示学生信息等。
#[Tags]*/
#include <stdio.h>
#define	SWN		3	#[Tags]/* 课程数 */
#define NAMELEN		20	#[Tags]/* 姓名最大字符数 */
#define CODELEN		10	#[Tags]/* 学号最大字符数 */
#define FNAMELEN	80	#[Tags]/* 文件名最大字符数 */
#define BUFLEN		80	#[Tags]/* 缓冲区最大字符数 */
#[Tags]/* 课程名称表 */
#[Keywords]char #schoolwork[SWN][NAMELEN+1] = {#[Fields]"Chinese"#,#[Fields]"Mathematic"#,#[Fields]"English"##};
struct record
{
	#char	name[NAMELEN+1];	#[Tags]/* 姓名 */
	#[Keywords]char #	code[CODELEN+1];	#[Tags]/* 学号 */
	#[Keywords]int #	marks[SWN];		#[Tags]/* 各课程成绩 */
	#[Keywords]int #total;			#[Tags]/* 总分 */
#}stu;
struct node
{
	#char	name[NAMELEN+1];	#[Tags]/* 姓名 */
	#[Keywords]char #	code[CODELEN+1];	#[Tags]/* 学号 */
	#[Keywords]int #	marks[SWN];		#[Tags]/* 各课程成绩 */
	#[Keywords]int #	total;			#[Tags]/* 总分 */
	#struct	node *next;		#[Tags]/* 后续表元指针 */
#}*head;	#[Tags]/* 链表首指针 */
#[Keywords]int #total[SWN];		#[Tags]/* 各课程总分 */
FILE *stfpt;		#[Tags]/* 文件指针 */
#[Keywords]char #stuf[FNAMELEN];	#[Tags]/* 文件名 */
#[Tags]/* 从指定文件读入一个记录 */
#[Keywords]int #readrecord(FILE *fpt,struct record *rpt)
{
	#[Keywords]char #buf[BUFLEN];
	#[Keywords]int #i;
	#[Keywords]if#(fscanf(fpt,#[Fields]"%s"#,buf)!=1)
		#[Keywords]return #0;	#[Tags]/* 文件结束 */
	#strncpy(rpt->name,buf,NAMELEN);
	#fscanf(fpt,#[Fields]"%s"#,buf);
	#strncpy(rpt->code,buf,CODELEN);
	#[Keywords]for#(i=0;i<SWN;i++)
		#fscanf(fpt,#[Fields]"%d"#,&rpt->marks[i]);
	#[Keywords]for#(rpt->total=0,i=0;i<SWN;i++)
		#rpt->total+=rpt->marks[i];
	#[Keywords]return #1;
#}
#[Tags]/* 对指定文件写入一个记录 */
writerecord(FILE *fpt,struct record *rpt)
{
	#[Keywords]int #i;
	#fprintf(fpt,#[Fields]"%s\n"#,rpt->name);
	#fprintf(fpt,#[Fields]"%s\n"#,rpt->code);
	#[Keywords]for#(i=0;i<SWN;i++)
		#fprintf(fpt,#[Fields]"%d\n"#,rpt->marks[i]);
	#[Keywords]return #;
#}
#[Tags]/* 显示学生记录 */
displaystu(struct record *rpt)
{
	#[Keywords]int #i;
	#printf(#[Fields]"\nName   : %s\n"#,rpt->name);
	#printf(#[Fields]"Code   : %s\n"#,rpt->code);
	#printf(#[Fields]"Marks  :\n"#);
	#[Keywords]for#(i=0;i<SWN;i++)
		#printf(#[Fields]"       %-15s : %4d\n"#,schoolwork[i],rpt->marks[i]);
	#printf(#[Fields]"Total  : %4d\n"#,rpt->total);
#}
#[Tags]/* 计算各单科总分 */
#[Keywords]int #totalmark(#[Keywords]char #*fname)
{
	#FILE *fp;
	#struct record s;
	#[Keywords]int #count,i;
	#[Keywords]if#((fp=fopen(fname,#[Fields]"r"#))==NULL)
	#{
		#printf(#[Fields]"Can#[Fields]'t open file %s.\n"#,fname);
		#[Keywords]return #0;
	#}
	#[Keywords]for#(i=0;i<SWN;i++)
		#total[i]=0;
	#count=0;
	#[Keywords]while#(readrecord(fp,&s)!=0)
	#{
		#[Keywords]for#(i=0;i<SWN;i++)
			#total[i]+=s.marks[i];
		#count++;
	#}
	#fclose(fp);
	#[Keywords]return #count;	#[Tags]/* 返回记录数 */
#}
#[Tags]/* 列表显示学生信息 */
#[Keywords]void #liststu(#[Keywords]char #*fname)
{
	#FILE *fp;
	#struct record s;
	#[Keywords]if#((fp=fopen(fname,#[Fields]"r"#))==NULL)
	#{
		#printf(#[Fields]"Can#[Fields]'t open file %s.\n"#,fname);
		#[Keywords]return #;
	#}
	#[Keywords]while#(readrecord(fp,&s)!=0)
	#{
		#displaystu(&s);
		#printf(#[Fields]"\n      Press ENTER to #[Keywords]continue#...\n"#);
		#[Keywords]while#(getchar()!=#[Fields]'\n'#);
	#}
	#fclose(fp);
	#[Keywords]return#;#
#}
#[Tags]/* 构造链表 */
struct node *makelist(#[Keywords]char #*fname)
{
	#FILE *fp;
	#struct record s;
	#struct node *p,*u,*v,*h;
	#[Keywords]int #i;
	#[Keywords]if#((fp=fopen(fname,#[Fields]"r"#))==NULL)
	#{
		#printf(#[Fields]"Can#[Fields]'t open file %s.\n"#,fname);
		#[Keywords]return #NULL;
	#}
	#h=NULL;
	#p=(struct node *)malloc(sizeof(struct node));
	#[Keywords]while#(readrecord(fp,(struct record *)p)!=0)
	#{
		#v=h;
		#[Keywords]while#(v&&p->total<=v->total)
		#{
			#u=v;
			#v=v->next;
		#}
		#[Keywords]if#(v==h)
			#h=p;
		#else
			#u->next=p;
		#p->next=v;
		#p=(struct node *)malloc(sizeof(struct node));
	#}
	#free(p);
	#fclose(fp);
	#[Keywords]return #h;
#}
#[Tags]/* 顺序显示链表各表元 */
#[Keywords]void #displaylist(struct node *h)
{
	#[Keywords]while#(h!=NULL)
	#{
		#displaystu((struct record *)h);
		#printf(#[Fields]"\n      Press ENTER to #[Keywords]continue#...\n"#);
		#[Keywords]while#(getchar()!=#[Fields]'\n'#);
		#h=h->next;
	#}
	#[Keywords]return#;#
#}
#[Tags]/* 按学生姓名查找学生记录 */
#[Keywords]int #retrievebyn(#[Keywords]char #*fname, #[Keywords]char #*key)
{
	#FILE *fp;
	#[Keywords]int #c;
	#struct record s;
	#[Keywords]if#((fp=fopen(fname,#[Fields]"r"#))==NULL)
	#{
		#printf(#[Fields]"Can#[Fields]'t open file %s.\n"#,fname);
		#[Keywords]return #0;
	#}
	#c=0;
	#[Keywords]while#(readrecord(fp,&s)!=0)
	#{
		#[Keywords]if#(strcmp(s.name,key)==0)
		#{
			#displaystu(&s);
			#c++;
		#}
	#}
	#fclose(fp);
	#[Keywords]if#(c==0)
		#printf(#[Fields]"The student %s is not in the file %s.\n"#,key,fname);
	#[Keywords]return #1;
#}
#[Tags]/* 按学生学号查找学生记录 */
#[Keywords]int #retrievebyc(#[Keywords]char #*fname, #[Keywords]char #*key)
{
	#FILE *fp;
	#[Keywords]int #c;
	#struct record s;
	#[Keywords]if#((fp=fopen(fname,#[Fields]"r"#))==NULL)
	#{
		#printf(#[Fields]"Can#[Fields]'t open file %s.\n"#,fname);
		#[Keywords]return #0;
	#}
	#c=0;
	#[Keywords]while#(readrecord(fp,&s)!=0)
	#{
		#[Keywords]if#(strcmp(s.code,key)==0)
		#{
			#displaystu(&s);
			#c++;
			#[Keywords]break#;
		#}
	#}
	#fclose(fp);
	#[Keywords]if#(c==0)
		#printf(#[Fields]"The student %s is not in the file %s.\n"#,key,fname);
	#[Keywords]return #1;
#}
main()
{
	#[Keywords]int #i,j,n;
	#[Keywords]char #c;
	#[Keywords]char #buf[BUFLEN];
	#FILE *fp;
	#struct record s;
	#clrscr();
	#printf(#[Fields]"Please input the students marks record file#[Fields]'s name: "#);
	#scanf(#[Fields]"%s"#,stuf);
	#[Keywords]if#((fp=fopen(stuf,#[Fields]"r"#))==NULL)
	#{
		#printf(#[Fields]"The file %s doesn#[Fields]'t exit, #[Keywords]do #you want to creat it? (Y/N) "#,stuf);
		#getchar();
		#c=getchar();
		#[Keywords]if#(c==#[Fields]'Y'#||c==#[Fields]'y'#)
		#{
			#fp=fopen(stuf,#[Fields]"w"#);
			#printf(#[Fields]"Please input the record number you want to write to the file: "#);
			#scanf(#[Fields]"%d"#,&n);
			#[Keywords]for#(i=0;i<n;i++)
			#{
				#printf(#[Fields]"Input the student#[Fields]'s name: "#);
				#scanf(#[Fields]"%s"#,&s.name);
				#printf(#[Fields]"Input the student#[Fields]'s code: "#);
				#scanf(#[Fields]"%s"#,&s.code);
				#[Keywords]for#(j=0;j<SWN;j++)
				#{
					#printf(#[Fields]"Input the %s mark: "#,schoolwork[j]);
					#scanf(#[Fields]"%d"#,&s.marks[j]);
				#}
				#writerecord(fp,&s);
			#}
			#fclose(fp);
		#}
	#}
	#fclose(fp);
	#getchar();
	#/*clrscr();*/
	#puts(#[Fields]"Now you can input a command to manage the records."#);
	#puts(#[Fields]"m : mean of the marks."#);
	#puts(#[Fields]"t : total of the marks."#);
	#puts(#[Fields]"n : search record by student#[Fields]'s name."#);
	#puts(#[Fields]"c : search record by student#[Fields]'s code."#);
	#puts(#[Fields]"l : list all the records."#);
	#puts(#[Fields]"s : sort and list the records by the total."#);
	#puts(#[Fields]"q : quit!"#);
	#[Keywords]while#(1)
	#{
		#puts(#[Fields]"Please input command:"#);
		#scanf(#[Fields]" %c"#,&c);		#[Tags]/* 输入选择命令 */
		#[Keywords]if#(c==#[Fields]'q'#||c==#[Fields]'Q'#)
		#{
			#puts(#[Fields]"\n Thank you #[Keywords]for #your using."#);
			#[Keywords]break#;		#[Tags]/* q，结束程序运行 */
		#}
		#switch(c)
		#{
			#[Keywords]case ##[Fields]'m'#: #[Tags]/* 计算平均分 */
			#[Keywords]case ##[Fields]'M'#:
				#[Keywords]if#((n=totalmark(stuf))==0)
				#{
					#puts(#[Fields]"Error!"#);
					#[Keywords]break#;
				#}
				#printf(#[Fields]"\n"#);
				#[Keywords]for#(i=0;i<SWN;i++)
					#printf(#[Fields]"%-15s#[Fields]'s average is: %.2f.\n"#,schoolwork[i],(#[Keywords]float#)total[i]/n);
				#[Keywords]break#;
			#[Keywords]case ##[Fields]'t'#: #[Tags]/* 计算总分 */
			#[Keywords]case ##[Fields]'T'#:
				#[Keywords]if#((n=totalmark(stuf))==0)
				#{
					#puts(#[Fields]"Error!"#);
					#[Keywords]break#;
				#}
				#printf(#[Fields]"\n"#);
				#[Keywords]for#(i=0;i<SWN;i++)
					#printf(#[Fields]"%-15s#[Fields]'s total mark is: %d.\n"#,schoolwork[i],total[i]);
				#[Keywords]break#;
			#[Keywords]case ##[Fields]'n'#: #[Tags]/* 按学生的姓名寻找记录 */
			#[Keywords]case ##[Fields]'N'#:
				#printf(#[Fields]"Please input the student#[Fields]'s name you want to search: "#);
				#scanf(#[Fields]"%s"#,buf);
				#retrievebyn(stuf,buf);
				#[Keywords]break#;
			#[Keywords]case ##[Fields]'c'#: #[Tags]/* 按学生的学号寻找记录 */
			#[Keywords]case ##[Fields]'C'#:
				#printf(#[Fields]"Please input the student#[Fields]'s code you want to search: "#);
				#scanf(#[Fields]"%s"#,buf);
				#retrievebyc(stuf,buf);
				#[Keywords]break#;
			#[Keywords]case ##[Fields]'l'#: #[Tags]/* 列出所有学生记录 */
			#[Keywords]case ##[Fields]'L'#:
				#liststu(stuf);
				#[Keywords]break#;
			#[Keywords]case ##[Fields]'s'#: #[Tags]/* 按总分从高到低排列显示 */
			#[Keywords]case ##[Fields]'S'#:
				#[Keywords]if#((head=makelist(stuf))!=NULL)
					#displaylist(head);
				#[Keywords]break#;
			#[Keywords]default#: #[Keywords]break#;
		#}
	#}
#}
[/code]